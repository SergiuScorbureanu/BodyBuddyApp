<div class="button-container">
  <button (click)="toggleForm()" class="add-food-button">
    {{ showForm ? 'Hide Form' : 'Add Food' }}
  </button>
</div>

<div *ngIf="showForm">
  <form (ngSubmit)="onSubmit()" #foodForm="ngForm">
    <fieldset>
      <legend>{{ editMode ? 'Edit Food' : 'Add Food' }}</legend>

      <!-- Name -->
      <div class="form-group row">
        <label for="name" class="col-sm-2 col-form-label">Name</label>
        <div class="col-sm-10">
          <input type="text" class="form-control" id="name" required [(ngModel)]="food.name" name="name" placeholder="Enter the food name">
        </div>
      </div>

      <!-- Measurement Unit -->
      <div class="form-group row">
        <label for="measurementUnit" class="col-sm-2 col-form-label">Measurement Unit</label>
        <div class="col-sm-10">
          <select class="form-select" id="measurementUnit" required [(ngModel)]="food.measurementUnit" name="measurementUnit" (change)="onMeasurementUnitChange()">
            <option value="grams">grams</option>
            <option value="ml">milliliters</option>
            <option value="piece">piece</option>
          </select>
        </div>
      </div>

      <div class="form-group row">
        <label for="quantity" class="col-sm-2 col-form-label">Quantity</label>
        <div class="col-sm-10">
          <input type="number" class="form-control" id="quantity" required [(ngModel)]="food.quantity" name="quantity" placeholder="Enter the quantity" readonly>
        </div>
      </div>

      <!-- Calories -->
      <div class="form-group row">
        <label for="calories" class="col-sm-2 col-form-label">Calories</label>
        <div class="col-sm-10">
          <input type="number" class="form-control" id="calories" required [(ngModel)]="food.calories" name="calories" placeholder="Enter the calories">
        </div>
      </div>

      <!-- Carbohydrates -->
      <div class="form-group row">
        <label for="carbohydrates" class="col-sm-2 col-form-label">Carbs</label>
        <div class="col-sm-10">
          <input type="number" class="form-control" id="carbohydrates" required [(ngModel)]="food.carbohydrates" name="carbohydrates" placeholder="Enter the carbohydrates">
        </div>
      </div>

      <!-- Fat -->
      <div class="form-group row">
        <label for="fat" class="col-sm-2 col-form-label">Fat</label>
        <div class="col-sm-10">
          <input type="number" class="form-control" id="fat" required [(ngModel)]="food.fat" name="fat" placeholder="Enter the fat">
        </div>
      </div>

      <!-- Protein -->
      <div class="form-group row">
        <label for="protein" class="col-sm-2 col-form-label">Protein</label>
        <div class="col-sm-10">
          <input type="number" class="form-control" id="protein" required [(ngModel)]="food.protein" name="protein" placeholder="Enter the protein">
        </div>
      </div>

      <button type="submit" [disabled]="!foodForm.form.valid">{{ editMode ? 'Update Food' : 'Add Food' }}</button>
    </fieldset>
  </form>
</div>

<div *ngIf="!showForm">
  <app-food-search-admin (editFood)="loadFoodForEdit($event)"></app-food-search-admin>
</div>
